<html layout:decorate="~{layout}">
<div layout:fragment="content" class="container my-5">

    <div class="mb-4 text-center">
        <h3 class="fw-bold text-primary">ğŸ“ ë°´ë“œ ê°€ì… ì‹ ì²­ ê´€ë¦¬</h3>
        <p class="text-muted">ë°´ë“œë¥¼ ì„ íƒí•˜ë©´ í•´ë‹¹ ë°´ë“œì˜ ê°€ì… ì‹ ì²­ ëª©ë¡ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>
    </div>

    <div class="mb-4">
        <label for="band" class="form-label fw-semibold">ë°´ë“œ ëª©ë¡</label>
        <select id="band" name="band" class="form-select">
            <option value="" disabled selected>ë°´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
            <option th:each="bandDto : ${bandList}"
                    th:value="${bandDto.band.id}"
                    th:text="${bandDto.band.bandName} + ' : ìƒˆ ì‹ ì²­ ' + ${bandDto.newApplyCount} + 'ê±´'">
            </option>
        </select>
    </div>

    <div id="applyList" class="mt-4">
    </div>

    <script>
        document.getElementById("band").addEventListener("change", function () {
          var bandId = this.value;

          if (bandId) {
            fetch('/management/apply/list?bandId=' + bandId)
              .then(response => response.text())
              .then(html => {
                document.getElementById('applyList').innerHTML = html;
              })
              .catch(error => {
                console.error('Error fetching band details:', error);
                document.getElementById('applyList').innerHTML =
                  '<div class="alert alert-danger">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>';
              });
          } else {
            document.getElementById('applyList').innerHTML = '';
          }
        });
    </script>
</div>
</html>